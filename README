# Ansible_Azure
"the goal of this project is to do the provisionning of a azure virtual amchine with ansible

1- Prerequisites: 
- make sure to have ansible installed in your control machine
- make sure to have created a Service principale to pass the authetication between your control machine and azure api  
   - Install the azure CLI
   - az login
   - cretae a service principal with contributor role apt:
      az ad sp create-for-rbac --name <service_principal_name> --role Contributor --scopes /subscriptions/<subscription_id>
   - store the result in ~/.azure/credentials
   - install azure_rm colelction to be abele to use the modules : 
      ansible-galaxy collection install azure.azcollection
   - Install dependencies required by the collection : 
      pip3 install -r ~/.ansible/collections/ansible_collections/azure/azcollection/requirements-azure.txt
   

2- Run Ansible:   
- to execute playbook : ansible-playbook playbooks/create_azure_vm.yml
- to check created vm : ansible-inventory -i myazure_rm.yml
- to Clean up resources : az group delete --name <resource_group> or run ansible-playbook playbooks/delete-rg.yml -e name=myResourceGroup


